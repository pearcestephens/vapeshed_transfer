# Environment Configuration Template
# Transfer Engine - Production Configuration
# Copy to .env and customize for your environment

# Application
APP_ENV=local
APP_DEBUG=false
APP_URL=https://staff.vapeshed.co.nz/transfer-engine
SESSION_COOKIE_NAME=vs_admin

# Database
DB_HOST=localhost
DB_PORT=3306
DB_NAME=vapeshed_unified
DB_USER=vapeshed_user
DB_PASS=your_secure_password_here

# Warehouse Configuration
WAREHOUSE_ID=1
WAREHOUSE_WEB_OUTLET_ID=020b2c2a-4671-11f0-e200-8e55f1689700

CSRF_REQUIRED=false

# Security - Global Rate Limits (requests per minute)
GET_RL_PER_MIN=120
GET_RL_BURST=30
POST_RL_PER_MIN=0
POST_RL_BURST=0
ADMIN_RATE_LIMIT_PER_MIN=120
ALLOW_PHPINFO=false

# Security - SSRF Protection
# Comma-separated list of allowed external hosts for webhook/API testers
# Empty = strict validation but no specific allowlist (DNS-based blocking only)
EGRESS_ALLOW_HOSTS=api.vendhq.com,hooks.slack.com,webhook.site

# Security - TLS Configuration
# Optional: Custom CA certificate bundle path (leave empty for system default)
# CURL_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt

# Security - Per-Endpoint Group Rate Limits
# Pricing API
PRICING_GET_RL_PER_MIN=90
PRICING_GET_RL_BURST=20
PRICING_POST_RL_PER_MIN=30
PRICING_POST_RL_BURST=10

# Transfer API
TRANSFER_GET_RL_PER_MIN=120
TRANSFER_GET_RL_BURST=40
TRANSFER_POST_RL_PER_MIN=40
TRANSFER_POST_RL_BURST=15

# History API (read-only)
HISTORY_GET_RL_PER_MIN=80
HISTORY_GET_RL_BURST=20

# Traces API (read-only)
TRACES_GET_RL_PER_MIN=60
TRACES_GET_RL_BURST=15

# Dashboard Stats
STATS_GET_RL_PER_MIN=45
STATS_GET_RL_BURST=15

# Module Status
MODULES_GET_RL_PER_MIN=45
MODULES_GET_RL_BURST=15

# Activity Feed
ACTIVITY_GET_RL_PER_MIN=60
ACTIVITY_GET_RL_BURST=20

# Smoke Summary
SMOKE_GET_RL_PER_MIN=15
SMOKE_GET_RL_BURST=5

# Unified Status
UNIFIED_GET_RL_PER_MIN=30
UNIFIED_GET_RL_BURST=10

# Session API
SESSION_GET_RL_PER_MIN=150
SESSION_GET_RL_BURST=30

# Diagnostics API
DIAGNOSTICS_GET_RL_PER_MIN=20
DIAGNOSTICS_GET_RL_BURST=5

# CORS Configuration
# Comma-separated list of allowed origins
CORS_ALLOWLIST=https://staff.vapeshed.co.nz,https://www.staff.vapeshed.co.nz

# API Token (optional - for automated clients)
# Leave empty to disable token enforcement
API_TOKEN=

# Feature Flags
DIAGNOSTICS_ENABLED=false
SMOKE_SUMMARY_ENABLED=false
HISTORY_API_ENABLED=true
TRACES_API_ENABLED=true
UNIFIED_STATUS_ENABLED=true

# SSE Configuration
SSE_MAX_LIFETIME_SEC=60
SSE_STATUS_PERIOD_SEC=5
SSE_HEARTBEAT_PERIOD_SEC=15
SSE_RETRY_MS=4000
SSE_MAX_GLOBAL=200
SSE_MAX_PER_IP=3
NEURO_UNIFIED_SSE.ENABLED=true
SSE_HEARTBEAT_INTERVAL=10

# Traffic & Alerting
TRAFFIC_CACHE_TTL=15
ALERT_WEBHOOK_URL=
ALERT_THRESHOLD_P95_MS=900
ALERT_THRESHOLD_ERROR_RATE=1.0

# Error Monitoring
ERROR_WINDOW_MINUTES=30
LOG_STORAGE_PATH=storage/logs
REDIRECT_TABLE=redirects
AUDIT_CHANNEL=system_event_log

# Health Checks
CHECK_DB_DSN=mysql:host=localhost;dbname=transfer_engine
CHECK_QUEUE_ENDPOINT=http://localhost:9000/queue/health
VEND_BASE_URL=https://api.vendhq.com
VEND_API_KEY=

# API Lab
WEBHOOK_ALLOWLIST=https://webhook.site/
API_LAB_MAX_PAYLOAD=65536
LIGHTSPEED_BASE_URL=
LIGHTSPEED_TOKEN=
QUEUE_API_URL=http://localhost:9000/queue
QUEUE_STRESS_LIMIT=200
SUITE_MAX_ENDPOINTS=50
SUITE_TIMEOUT_SECONDS=120

# Logging Utilities
LOG_TAIL_LINES_DEFAULT=200
LOG_TAIL_MAX=500
LOG_SNAPSHOT_DIR=/var/log/cis/snapshots
LOG_SNAPSHOT_RETENTION_DAYS=30

# Logging
LOG_LEVEL=info
LOG_PATH=storage/logs

# Timezone
TZ=Pacific/Auckland

# ============================================
# ALERT SYSTEM CONFIGURATION
# ============================================

# Email Alerts
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL=pearce.stephens@ecigdis.co.nz

# Slack Alerts  
SLACK_WEBHOOK_URL=
# Example: https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# SMS Alerts (Twilio)
TWILIO_SID=
TWILIO_TOKEN=
TWILIO_FROM=
# Comma-separated list of numbers (E.164 format: +64XXXXXXXXX)
ALERT_SMS_NUMBERS=

# Alert Throttling
ALERT_THROTTLE_SECONDS=300

# ============================================
